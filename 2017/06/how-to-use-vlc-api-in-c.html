<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">        

    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" integrity="sha384-awusxf8AUojygHf2+joICySzB780jVvQaVCAt1clU3QsyAitLGul28Qxb2r1e5g+" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">

      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shCore.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shThemeEclipse.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shCoreEclipse.min.css">

    <link href="/css/custom.css" rel="stylesheet">
    <link href="/css/syntax.css" rel="stylesheet">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!-- Begin Jekyll SEO tag v2.0.0 -->
<title>How to Use VLC Media Player API in a C Program - Progur!</title>
<meta property="og:title" content="How to Use VLC Media Player API in a C Program" />
<meta name="description" content="Did you know that the VLC media player has a powerful API you can use in your C programs to add VLC-like capabilities to them? In this tutorial, I introduce you to the API." />
<meta property="og:description" content="Did you know that the VLC media player has a powerful API you can use in your C programs to add VLC-like capabilities to them? In this tutorial, I introduce you to the API." />
<link rel="canonical" href="http://progur.com/2017/06/how-to-use-vlc-api-in-c.html" />
<meta property="og:url" content="http://progur.com/2017/06/how-to-use-vlc-api-in-c.html" />
<meta property="og:site_name" content="Progur!" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-06-27T00:00:00+05:30" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@hathibel" />
<meta name="twitter:creator" content="@hathibel" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "How to Use VLC Media Player API in a C Program",
    "datePublished": "2017-06-27T00:00:00+05:30",
    "description": "Did you know that the VLC media player has a powerful API you can use in your C programs to add VLC-like capabilities to them? In this tutorial, I introduce you to the API.",
    "logo": "http://progur.com/assets/logo.jpg",
    "url": "http://progur.com/2017/06/how-to-use-vlc-api-in-c.html"
  }
</script>
<!-- End Jekyll SEO tag -->
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><i class="fa fa-terminal logo"></i> PROGUR!</a>
        </div>
        <!-- Options -->
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a target="_blank" href="https://twitter.com/hathibel" title="Follow me on Twitter"><i class="fa fa-lg fa-twitter" style="color: #4099FF"></i> &nbsp; Twitter</a></li>
            <li><a target="_blank" href="https://plus.google.com/+Progur" title="Follow me on Google+" ><i class="fa fa-lg fa-google-plus" style="color: #d34836"></i> &nbsp; Google+</a></li>
            <li><a target="_blank" href="https://github.com/hathibelagal" title="Follow me on GitHub"><i class="fa fa-lg fa-github" style="color: #999999"></i> &nbsp; GitHub</a></li>
            <li><a target="_blank" href="https://medium.com/@hathibel" title="Follow me on Medium"><i class="fa fa-lg fa-medium" style="color: #0be370"></i> &nbsp; Medium</a></li>
            <li><a target="_blank" href="/feed.xml" title="Subscribe to our RSS feed"><i class="fa fa-lg fa-rss" style="color: #FF6600"></i>&nbsp; RSS</a></li>
          </ul>
        </div>
        <!-- End of Options -->
      </div>
    </nav>


<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div>
                <div>
                    <h1 class="post-title">How to Use VLC Media Player API in a C Program</h1>
                    <div class="post-meta">Written by Ashraff Hathibelagal &bull; 27 June 2017</div>
                    <p style="margin-bottom: 20px"><span class="label label-info"><i class="fa fa-tag"> </i> &nbsp; Programming </span></p>
                    <div class="post-actual-content">
                        <p>Did you know that the VLC media player has a powerful API you can use in your C programs to add VLC-like capabilities to them. For instance, you could use the API to quickly play any media file, extract meta-data from it, or even extract individual video frames from it. In this tutorial, I’ll show you how to create a simple C program that can play an audio file. For the sake of completeness, I’ll also show you how to listen to the events generated by the player while it is playing the file.</p>

<h3 id="setup">Setup</h3>

<p>To be able to use the API, you must install the <code class="highlighter-rouge">libvlc-dev</code> package on your Ubuntu computer. You can easily do so using <code class="highlighter-rouge">apt-get</code>.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get install libvlc-dev</code></pre></figure>

<h3 id="using-the-api">Using the API</h3>

<p>Before you use the VLC API in your C program, all you need to do is include <code class="highlighter-rouge">vlc/vlc.h</code> as one of your header files. In this tutorial, however, we’ll also be using <code class="highlighter-rouge">stdlib.h</code> and <code class="highlighter-rouge">stdio.h</code>.</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="cp">#include &lt;stdio.h&gt;
#include &lt;vlc/vlc.h&gt;
#include &lt;stdlib.h&gt;
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// More code here
</span><span class="p">}</span></code></pre></figure>

<p>Every program that uses the API must first initialize a VLC instance using the <code class="highlighter-rouge">libvlc_new()</code> function. The function might return a <code class="highlighter-rouge">NULL</code> if there’s an error creating the instance, so make sure you handle it appropriately.</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">libvlc_instance_t</span> <span class="o">*</span><span class="n">my_instance</span><span class="p">;</span>

<span class="n">my_instance</span> <span class="o">=</span> <span class="n">libvlc_new</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="n">my_instance</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"There was an error initializing VLC</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"VLC initialized successfully</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>We will of course use a media file, say a song or a movie, while working with the API. To specify the media file you want to use, you must the <code class="highlighter-rouge">libvlc_media_new_path()</code> function, which expects an absolute path. Here’s how you do that:</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">libvlc_media_t</span> <span class="o">*</span><span class="n">my_media_file</span><span class="p">;</span>
<span class="n">my_media_file</span> <span class="o">=</span> <span class="n">libvlc_media_new_path</span><span class="p">(</span><span class="n">my_instance</span><span class="p">,</span> <span class="s">"/tmp/song.flac"</span><span class="p">);</span></code></pre></figure>

<p>As you can see in the above code, the file I am using is called <strong>song.flac</strong>, and it’s present in my <strong>/tmp</strong> directory.</p>

<p>To actually play the media file, you will also need a media player, which can be created using the <code class="highlighter-rouge">libvlc_media_player_new_from_media()</code> function. Once the player has been created, you can simply call the <code class="highlighter-rouge">libvlc_media_player_play()</code> function to start playing the file.</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="c1">// Create player
</span><span class="n">libvlc_media_player_t</span> <span class="o">*</span><span class="n">my_player</span><span class="p">;</span>
<span class="n">my_player</span> <span class="o">=</span> <span class="n">libvlc_media_player_new_from_media</span><span class="p">(</span><span class="n">my_media_file</span><span class="p">);</span>

<span class="c1">// Start playing
</span><span class="n">libvlc_media_player_play</span><span class="p">(</span><span class="n">my_player</span><span class="p">);</span></code></pre></figure>

<p>The media will start playing immediately. However, it plays asynchronously. Therefore, unless you add a call to the <code class="highlighter-rouge">sleep()</code> function now, your program will exit before the file has completed playing.</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span> <span class="cm">/* Wait for 15 seconds */</span></code></pre></figure>

<p>Lastly, it’s a good idea to release the media player, the media file, and the VLC instance before your program ends. Here’s how you can do so:</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">libvlc_media_release</span><span class="p">(</span><span class="n">my_media_file</span><span class="p">);</span>
<span class="n">libvlc_media_player_release</span><span class="p">(</span><span class="n">my_player</span><span class="p">);</span>
<span class="n">libvlc_release</span><span class="p">(</span><span class="n">my_instance</span><span class="p">);</span></code></pre></figure>

<h3 id="compiling-and-running">Compiling and Running</h3>

<p>While compiling a program that uses the VLC API, you must make sure you link it with the <code class="highlighter-rouge">vlc</code> library. For example, if your program is called <code class="highlighter-rouge">my_program.c</code>, here’s how you would compile and run it:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">gcc my_program.c -l vlc -o my_program
./my_program</code></pre></figure>

<p>At this point, you should be able to hear your file being played.</p>

<h3 id="listening-to-player-events">Listening to Player Events</h3>

<p>You already know that the VLC library plays the media file asynchronously. While doing so, it also raises several events. If you wish to listen for those events, you must first create an event manager using the <code class="highlighter-rouge">libvlc_media_player_event_manager()</code> function.</p>

<p>Once you have the event manager, you can call the <code class="highlighter-rouge">libvlc_event_attach()</code> function to associate an event handler with any event. The following code shows you how to listen for <code class="highlighter-rouge">libvlc_MediaPlayerPositionChanged</code> events.</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">libvlc_event_manager_t</span> <span class="o">*</span><span class="n">my_event_manager</span><span class="p">;</span>
<span class="n">my_event_manager</span> <span class="o">=</span> <span class="n">libvlc_media_player_event_manager</span><span class="p">(</span><span class="n">my_player</span><span class="p">);</span>

<span class="n">libvlc_event_attach</span><span class="p">(</span><span class="n">my_event_manager</span><span class="p">,</span> 
                    <span class="n">libvlc_MediaPlayerPositionChanged</span><span class="p">,</span> <span class="n">my_callback</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span></code></pre></figure>

<p>In the above code, we’ve used <strong>my_callback</strong> as the name of our event handler. As you might have guessed, this is going to be nothing but another function. Inside the function, you will have access to a variable of type <code class="highlighter-rouge">libvlc_event_t</code>, using which you can learn more about the event. For example, here’s how you simply print the current position of the media player head:</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="kt">void</span> <span class="nf">my_callback</span><span class="p">(</span><span class="k">const</span> <span class="n">libvlc_event_t</span> <span class="o">*</span><span class="n">event</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">param</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"Position is: %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">event</span><span class="o">-&gt;</span><span class="n">u</span><span class="p">.</span><span class="n">media_player_position_changed</span><span class="p">.</span><span class="n">new_position</span><span class="p">);</span>
    <span class="n">fflush</span><span class="p">(</span><span class="n">stdout</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>Go ahead and run the program again. This time, you should see several log messages showing the latest position of the player head.</p>

<h3 id="conclusion">Conclusion</h3>

<p>You now know the basics of using the VLC API. I’m sure you’ll agree with me when I say that it is extremely intuitive and easy to use. There’s a lot more the API offers, and you can learn all about it by referring to the <a href="http://www.videolan.org/developers/vlc/doc/doxygen/html/modules.html">official documentation</a>.</p>

<h4 id="related-reading">Related Reading</h4>

<ul>
  <li><a href="/2016/09/how-to-install-and-use-zstd-facebook.html">How to Install and Use Facebook’s Zstandard</a></li>
</ul>

                    </div>

                    <!-- Affiliate links -->
                    <div class="post-affiliates">
                        <script type="text/javascript">
                        amzn_assoc_placement = "adunit0";
                        amzn_assoc_search_bar = "true";
                        amzn_assoc_tracking_id = "progur-20";
                        amzn_assoc_ad_mode = "manual";
                        amzn_assoc_ad_type = "smart";
                        amzn_assoc_marketplace = "amazon";
                        amzn_assoc_region = "US";
                        amzn_assoc_title = "Shop Related Products";
                        amzn_assoc_linkid = "6b7650e384633c5d230f7dd85c971ee5";
                        amzn_assoc_asins = "B071VLZ9ZK,B01J6G4WB6,B00C893P8U,B00P8DRZWA,B01MRZFBBH,B01MXLZIDS,B01H3V07EW,B00LEAPLWW";
                        </script>
                        <script src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US"></script>
                    </div>
                    <!-- End of affiliate links -->

                    <!-- Share -->
                    <div class="post-share">
                        <p>If you found this article useful, please share it with your friends and colleagues!</p>
                        <a class="btn btn-primary" style="background:#4099FF" target="_blank" href="https://twitter.com/intent/tweet?text=How to Use VLC Media Player API in a C Program&url=http://progur.com/2017/06/how-to-use-vlc-api-in-c.html&via=hathibel" onclick="javascript:window.open(this.href,
  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=600');return false;"><i class="fa fa-twitter fa-lg"></i></a>

                        <a class="btn btn-primary" style="background:#3b5998" target="_blank" href="https://facebook.com/sharer.php?u=http://progur.com/2017/06/how-to-use-vlc-api-in-c.html" onclick="javascript:window.open(this.href,
  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=600');return false;"><i class="fa fa-facebook fa-lg"></i></a>
                        
                        <a class="btn btn-primary" style="background:#dd4b39" target="_blank" href="https://plus.google.com/share?url=http://progur.com/2017/06/how-to-use-vlc-api-in-c.html" onclick="javascript:window.open(this.href,
  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><i class="fa fa-google-plus fa-lg"></i></a>
                    </div>

                    <!-- End of Share -->

                    <!-- Comments -->
                      <div class="comments">
                          <div id="disqus_thread"></div>
                            <script>                                    
                                var disqus_config = function () {
                                    this.page.url = "http://progur.com/2017/06/how-to-use-vlc-api-in-c.html";
                                    this.page.identifier = "/2017/06/how-to-use-vlc-api-in-c.html";
                                };
                                (function() {
                                    var d = document, s = d.createElement('script');

                                    s.src = '//progur.disqus.com/embed.js';

                                    s.setAttribute('data-timestamp', +new Date());
                                    (d.head || d.body).appendChild(s);
                                })();
                            </script>
                            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
                      </div>
                    <!-- End of comments -->
                </div>
            </div>
        </div>
    </div>
</div>

<footer class="footer">
  <div class="container">
    <p>
        Copyright &copy; 2016-2017 Progur.com | All rights reserved.
        <br/>
        Powered by Jekyll, and several secret sauces.
        <br/>
        <i>We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</i>
    </p>
  </div>
</footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shAutoloader.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shCore.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushBash.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushJava.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushPython.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushXml.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushRuby.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushCpp.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushJScript.min.js"></script>

          <script>
              SyntaxHighlighter.defaults.toolbar = false;
              SyntaxHighlighter.all();
          </script>

        <!-- Analytics -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-46644689-5', 'auto');
          ga('send', 'pageview');

        </script>
        <!-- End of Analytics -->

  </body>
</html>

