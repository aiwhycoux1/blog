<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">        

    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" integrity="sha384-awusxf8AUojygHf2+joICySzB780jVvQaVCAt1clU3QsyAitLGul28Qxb2r1e5g+" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">

      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shCore.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shThemeEclipse.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shCoreEclipse.min.css">

    <link href="/css/custom.css" rel="stylesheet">
    <link href="/css/syntax.css" rel="stylesheet">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!-- Begin Jekyll SEO tag v2.0.0 -->
<title>How to Create 8-bit Music on Android - Progur!</title>
<meta property="og:title" content="How to Create 8-bit Music on Android" />
<meta name="description" content="In this tutorial, you’re going to learn how to create an Android app that can generate 8-bit tunes, or chiptunes." />
<meta property="og:description" content="In this tutorial, you’re going to learn how to create an Android app that can generate 8-bit tunes, or chiptunes." />
<link rel="canonical" href="http://progur.com/2016/12/how-to-create-8-bit-music-on-android.html" />
<meta property="og:url" content="http://progur.com/2016/12/how-to-create-8-bit-music-on-android.html" />
<meta property="og:site_name" content="Progur!" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-12-11T00:00:00+05:30" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@hathibel" />
<meta name="twitter:creator" content="@hathibel" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "How to Create 8-bit Music on Android",
    "datePublished": "2016-12-11T00:00:00+05:30",
    "description": "In this tutorial, you’re going to learn how to create an Android app that can generate 8-bit tunes, or chiptunes.",
    "logo": "http://progur.com/assets/logo.jpg",
    "url": "http://progur.com/2016/12/how-to-create-8-bit-music-on-android.html"
  }
</script>
<!-- End Jekyll SEO tag -->
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><i class="fa fa-terminal logo"></i> PROGUR!</a>
        </div>
        <!-- Options -->
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a target="_blank" href="https://twitter.com/hathibel" title="Follow me on Twitter"><i class="fa fa-lg fa-twitter" style="color: #4099FF"></i> &nbsp; Twitter</a></li>
            <li><a target="_blank" href="https://plus.google.com/+Progur" title="Follow me on Google+" ><i class="fa fa-lg fa-google-plus" style="color: #d34836"></i> &nbsp; Google+</a></li>
            <li><a target="_blank" href="https://github.com/hathibelagal" title="Follow me on GitHub"><i class="fa fa-lg fa-github" style="color: #999999"></i> &nbsp; GitHub</a></li>
            <li><a target="_blank" href="https://medium.com/@hathibel" title="Follow me on Medium"><i class="fa fa-lg fa-medium" style="color: #0be370"></i> &nbsp; Medium</a></li>
            <li><a target="_blank" href="/feed.xml" title="Subscribe to our RSS feed"><i class="fa fa-lg fa-rss" style="color: #FF6600"></i>&nbsp; RSS</a></li>
          </ul>
        </div>
        <!-- End of Options -->
      </div>
    </nav>


<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div>
                <div>
                    <h1 class="post-title">How to Create 8-bit Music on Android</h1>
                    <div class="post-meta">Written by Ashraff Hathibelagal &bull; 11 December 2016</div>
                    <p style="margin-bottom: 20px"><span class="label label-info"><i class="fa fa-tag"> </i> &nbsp; Programming </span></p>
                    <div class="post-actual-content">
                        <p>8-bit music has been around for several decades now. Although not as popular as it was back in the 80s, it still is used in some games. There’s also a very active, though small, community of 8-bit music producers today. Creating such music takes just a few lines of code if you use the classes offered by the Android SDK. Because I am no music producer, in this tutorial, I’ll just be showing you how to generate musical frequencies programmatically. You can always string multiple frequencies together to generate some beautiful 8-bit tune.</p>

<h3 id="prerequisites">Prerequisites</h3>

<p>To be able to follow this tutorial, you’re going to need the latest version of Android Studio and an emulator running Android 4.0.4 or higher.</p>

<h3 id="generating-a-frequency">Generating a Frequency</h3>

<p>Let us now create a method that accepts a frequency and a duration as its inputs and generates a sound of the given frequency that lasts for the given duration.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">generateSound</span><span class="o">(</span><span class="kt">int</span> <span class="n">frequency</span><span class="o">,</span> <span class="kt">int</span> <span class="n">duration</span><span class="o">)</span> <span class="o">{</span>

<span class="o">}</span></code></pre></figure>

<p>We’ll be using pulse-code modulation, or PCM for short, to create the sound. In simpler terms, we’ll be generating a sine wave and sampling it a fixed number of times per second.</p>

<p>Additionally, because we are interested only in 8-bit sounds, we’ll have to make sure that the value of each sample can be represented by a single <code class="highlighter-rouge">byte</code>.</p>

<p>Keeping the above details in mind, we’ll be generating <code class="highlighter-rouge">sampleRate * duration</code> samples. Here’s the code to do that:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kt">int</span> <span class="n">sampleRate</span> <span class="o">=</span> <span class="mi">44100</span><span class="o">;</span> <span class="c1">// Feel free to change this</span>
<span class="kt">byte</span> <span class="n">soundData</span><span class="o">[]</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">sampleRate</span> <span class="o">*</span> <span class="n">duration</span><span class="o">];</span>

<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">soundData</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="kt">byte</span> <span class="n">sample</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)(</span>
            <span class="n">Math</span><span class="o">.</span><span class="na">sin</span><span class="o">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">Math</span><span class="o">.</span><span class="na">PI</span> <span class="o">*</span> <span class="n">frequency</span> <span class="o">*</span> <span class="n">i</span> <span class="o">/</span> <span class="n">sampleRate</span><span class="o">)</span> <span class="o">*</span>
            <span class="mi">255</span><span class="o">);</span>
    <span class="n">soundData</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">sample</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p>Note that we are using a simple sine wave. If you don’t understand the formula, I suggest you refer to <a href="https://en.wikipedia.org/wiki/Sine_wave" target="_blank" rel="nofollow">this page</a>.</p>

<p>Now that we have the sound data, we can pass it to an <code class="highlighter-rouge">AudioTrack</code> object to actually hear the sound. To initialize the <code class="highlighter-rouge">AudioTrack</code> instance, you can use its constructor, which accepts a few very obvious arguments.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">AudioTrack</span> <span class="n">track</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AudioTrack</span><span class="o">(</span><span class="n">AudioManager</span><span class="o">.</span><span class="na">STREAM_MUSIC</span><span class="o">,</span>
        <span class="n">sampleRate</span><span class="o">,</span>
        <span class="n">AudioFormat</span><span class="o">.</span><span class="na">CHANNEL_OUT_DEFAULT</span><span class="o">,</span>
        <span class="n">AudioFormat</span><span class="o">.</span><span class="na">ENCODING_PCM_8BIT</span><span class="o">,</span> <span class="n">soundData</span><span class="o">.</span><span class="na">length</span><span class="o">,</span>
        <span class="n">AudioTrack</span><span class="o">.</span><span class="na">MODE_STATIC</span>
<span class="o">);</span></code></pre></figure>

<p>To let the <code class="highlighter-rouge">AudioTrack</code> instance know that we want to play the sound that’s contained in the <code class="highlighter-rouge">soundData</code> array, use the <code class="highlighter-rouge">write()</code> method. Finally, call <code class="highlighter-rouge">play()</code> to start playing the sound.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">track</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">soundData</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">soundData</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
<span class="n">track</span><span class="o">.</span><span class="na">play</span><span class="o">();</span></code></pre></figure>

<p>Go ahead and try to test the method now. Here’s a sample call to the <code class="highlighter-rouge">generateSound()</code> method that generates a tone of 440 Hz for 15 seconds.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">generateSound</span><span class="o">(</span><span class="mi">440</span><span class="o">,</span> <span class="mi">15</span><span class="o">);</span></code></pre></figure>

<p>At this point, if you run your app, you should be able to hear the sound.</p>

<p><em>Warning: If you are wearing headphones and are using an emulator, lower the volume to protect your ears.</em></p>

<h3 id="adding-harmonics">Adding Harmonics</h3>

<p>The sound we just generated is way too simple. Usually, you can improve the quality of the sound, and make it feel a little more realistic by adding harmonics to the wave. A harmonic is nothing but the same sine wave having a frequency which is a multiple of the original frequency.</p>

<p>Let us now add two harmonics to our wave. The first harmonic will have frequency which is 2x the original frequency. Similarly, the second harmonic’s frequency will be 4x the original frequency. Furthermore, let the amplitudes of the harmonics be lower than 1, say 0.5 and 0.25.</p>

<p>Here’s the updated code to generate the samples:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">soundData</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">originalWave</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">sin</span><span class="o">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">Math</span><span class="o">.</span><span class="na">PI</span> <span class="o">*</span> <span class="n">frequency</span> <span class="o">*</span> <span class="n">i</span> <span class="o">/</span> <span class="n">sampleRate</span><span class="o">);</span>
    <span class="kt">double</span> <span class="n">harmonic1</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">Math</span><span class="o">.</span><span class="na">sin</span><span class="o">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">Math</span><span class="o">.</span><span class="na">PI</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">frequency</span> <span class="o">*</span> <span class="n">i</span> <span class="o">/</span> <span class="n">sampleRate</span><span class="o">);</span>
    <span class="kt">double</span> <span class="n">harmonic2</span> <span class="o">=</span> <span class="mf">0.25</span> <span class="o">*</span> <span class="n">Math</span><span class="o">.</span><span class="na">sin</span><span class="o">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">Math</span><span class="o">.</span><span class="na">PI</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">frequency</span> <span class="o">*</span> <span class="n">i</span> <span class="o">/</span> <span class="n">sampleRate</span><span class="o">);</span>

    <span class="c1">// Add all the waves</span>
    <span class="kt">byte</span> <span class="n">sample</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)((</span><span class="n">originalWave</span> <span class="o">+</span> <span class="n">harmonic1</span> <span class="o">+</span> <span class="n">harmonic2</span><span class="o">)</span> <span class="o">*</span> <span class="mi">255</span><span class="o">);</span>
    <span class="n">soundData</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">sample</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p>If you run the app now, you should hear a slightly different sound.</p>

<h3 id="conclusion">Conclusion</h3>

<p>You now know how to create 8-bit sounds using the Android SDK. You can now ahead and experiment with different frequencies and harmonics, and also try modifying the waveform.</p>

<h4 id="related-reading">Related Reading</h4>

<ul>
  <li><a href="/2016/12/display-gifs-webps-with-facebook-fresco.html">Displaying Large Images in Android Apps Using Facebook Fresco</a></li>
</ul>

                    </div>

                    <!-- Share -->
                    <div class="post-share">
                        <p>If you found this article useful, please share it with your friends and colleagues!</p>
                        <a class="btn btn-primary" style="background:#4099FF" target="_blank" href="https://twitter.com/intent/tweet?text=How to Create 8-bit Music on Android&url=http://progur.com/2016/12/how-to-create-8-bit-music-on-android.html&via=hathibel" onclick="javascript:window.open(this.href,
  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=600');return false;"><i class="fa fa-twitter fa-lg"></i></a>

                        <a class="btn btn-primary" style="background:#3b5998" target="_blank" href="https://facebook.com/sharer.php?u=http://progur.com/2016/12/how-to-create-8-bit-music-on-android.html" onclick="javascript:window.open(this.href,
  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=600');return false;"><i class="fa fa-facebook fa-lg"></i></a>
                        
                        <a class="btn btn-primary" style="background:#dd4b39" target="_blank" href="https://plus.google.com/share?url=http://progur.com/2016/12/how-to-create-8-bit-music-on-android.html" onclick="javascript:window.open(this.href,
  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><i class="fa fa-google-plus fa-lg"></i></a>
                    </div>

                    <!-- End of Share -->

                    <!-- Comments -->
                      <div class="comments">
                          <div id="disqus_thread"></div>
                            <script>                                    
                                var disqus_config = function () {
                                    this.page.url = "http://progur.com/2016/12/how-to-create-8-bit-music-on-android.html";
                                    this.page.identifier = "/2016/12/how-to-create-8-bit-music-on-android.html";
                                };
                                (function() {
                                    var d = document, s = d.createElement('script');

                                    s.src = '//progur.disqus.com/embed.js';

                                    s.setAttribute('data-timestamp', +new Date());
                                    (d.head || d.body).appendChild(s);
                                })();
                            </script>
                            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
                      </div>
                    <!-- End of comments -->
                </div>
            </div>
        </div>
    </div>
</div>

<footer class="footer">
  <div class="container">
    <p>
        Copyright &copy; 2016-2017 Progur.com | All rights reserved.
        <br/>
        Powered by Jekyll, and several secret sauces.
    </p>
  </div>
</footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shAutoloader.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shCore.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushBash.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushJava.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushPython.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushXml.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushRuby.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushCpp.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushJScript.min.js"></script>

          <script>
              SyntaxHighlighter.defaults.toolbar = false;
              SyntaxHighlighter.all();
          </script>

        <!-- Analytics -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-46644689-5', 'auto');
          ga('send', 'pageview');

        </script>
        <!-- End of Analytics -->

  </body>
</html>

