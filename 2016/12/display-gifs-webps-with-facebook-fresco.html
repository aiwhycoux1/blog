<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">        

    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" integrity="sha384-awusxf8AUojygHf2+joICySzB780jVvQaVCAt1clU3QsyAitLGul28Qxb2r1e5g+" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">

      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shCore.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shThemeEclipse.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shCoreEclipse.min.css">

    <link href="/css/custom.css" rel="stylesheet">
    <link href="/css/syntax.css" rel="stylesheet">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!-- Begin Jekyll SEO tag v2.0.0 -->
<title>Displaying GIFs and Large Images in Android Apps Using Facebook Fresco - Progur!</title>
<meta property="og:title" content="Displaying GIFs and Large Images in Android Apps Using Facebook Fresco" />
<meta name="description" content="In this quick tutorial, you’ll learn how to add image files, such as large JPEGs and animated GIFs, to your Android apps using a powerful library called Facebook Fresco." />
<meta property="og:description" content="In this quick tutorial, you’ll learn how to add image files, such as large JPEGs and animated GIFs, to your Android apps using a powerful library called Facebook Fresco." />
<link rel="canonical" href="http://progur.com/2016/12/display-gifs-webps-with-facebook-fresco.html" />
<meta property="og:url" content="http://progur.com/2016/12/display-gifs-webps-with-facebook-fresco.html" />
<meta property="og:site_name" content="Progur!" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-12-07T00:00:00+05:30" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@hathibel" />
<meta name="twitter:creator" content="@hathibel" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Displaying GIFs and Large Images in Android Apps Using Facebook Fresco",
    "datePublished": "2016-12-07T00:00:00+05:30",
    "description": "In this quick tutorial, you’ll learn how to add image files, such as large JPEGs and animated GIFs, to your Android apps using a powerful library called Facebook Fresco.",
    "logo": "http://progur.com/assets/logo.jpg",
    "url": "http://progur.com/2016/12/display-gifs-webps-with-facebook-fresco.html"
  }
</script>
<!-- End Jekyll SEO tag -->
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><i class="fa fa-terminal logo"></i> PROGUR!</a>
        </div>
        <!-- Options -->
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a target="_blank" href="https://twitter.com/hathibel" title="Follow me on Twitter"><i class="fa fa-lg fa-twitter" style="color: #4099FF"></i> &nbsp; Twitter</a></li>
            <li><a target="_blank" href="https://plus.google.com/+Progur" title="Follow me on Google+" ><i class="fa fa-lg fa-google-plus" style="color: #d34836"></i> &nbsp; Google+</a></li>
            <li><a target="_blank" href="https://github.com/hathibelagal" title="Follow me on GitHub"><i class="fa fa-lg fa-github" style="color: #999999"></i> &nbsp; GitHub</a></li>
            <li><a target="_blank" href="https://medium.com/@hathibel" title="Follow me on Medium"><i class="fa fa-lg fa-medium" style="color: #0be370"></i> &nbsp; Medium</a></li>
            <li><a target="_blank" href="/feed.xml" title="Subscribe to our RSS feed"><i class="fa fa-lg fa-rss" style="color: #FF6600"></i>&nbsp; RSS</a></li>
          </ul>
        </div>
        <!-- End of Options -->
      </div>
    </nav>


<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div>
                <div>
                    <h1 class="post-title">Displaying GIFs and Large Images in Android Apps Using Facebook Fresco</h1>
                    <div class="post-meta">Written by Ashraff Hathibelagal &bull; 07 December 2016</div>
                    <p style="margin-bottom: 20px"><span class="label label-info"><i class="fa fa-tag"> </i> &nbsp; Programming </span></p>
                    <div class="post-actual-content">
                        <h3 id="introduction">Introduction</h3>

<p>Handling large images in Android apps has always been a little tricky. With <a href="http://frescolib.org/" target="_blank" rel="nofollow">Facebook Fresco</a>, however, you can add huge images to your app, including animated GIFs and WebP files, without having to worry about memory and size issues. In this tutorial, I’m going to help you get started with it.</p>

<h3 id="prerequisites">Prerequisites</h3>

<p>To follow along, you’ll need the following:</p>

<ul>
  <li>The latest version of Android Studio</li>
  <li>An Android device or emulator running API level 15 or higher</li>
</ul>

<h3 id="configure-your-project">1. Configure Your Project</h3>

<p>To be able to use Fresco in your project, you must add it as a <code class="highlighter-rouge">compile</code> dependency in the app module’s <strong>build.gradle</strong> file.</p>

<figure class="highlight"><pre><code class="language-groovy" data-lang="groovy"><span class="n">compile</span> <span class="s1">'com.facebook.fresco:fresco:0.13.0'</span></code></pre></figure>

<p>By default, Fresco doesn’t support animated GIFs or WebP files. If you want to handle those formats, you must add the following <code class="highlighter-rouge">compile</code> dependencies:</p>

<figure class="highlight"><pre><code class="language-groovy" data-lang="groovy"><span class="n">compile</span> <span class="s1">'com.facebook.fresco:animated-gif:0.13.0'</span>
<span class="n">compile</span> <span class="s1">'com.facebook.fresco:animated-webp:0.13.0'</span>
<span class="n">compile</span> <span class="s1">'com.facebook.fresco:webpsupport:0.13.0'</span></code></pre></figure>

<p>Fresco needs one more configuration step. It must be initialized as soon as your app starts. More precisely, you must initialize Fresco inside the <code class="highlighter-rouge">onCreate()</code> method of the <code class="highlighter-rouge">Application</code> class.</p>

<p>Here’s how you would do it:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FrescoApp</span> <span class="kd">extends</span> <span class="n">Application</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">();</span>
        <span class="n">Fresco</span><span class="o">.</span><span class="na">initialize</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>You must, of course, also add a <code class="highlighter-rouge">name</code> attribute to the <code class="highlighter-rouge">&lt;application&gt;</code> tag in your manifest file to mention this new class.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;application android:name=".FrescoApp" ....
</code></pre>
</div>

<p>Oh, and while you are there, request for the <code class="highlighter-rouge">INTERNET</code> permission as well, because we’ll be loading images from the Internet.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.INTERNET"</span><span class="nt">/&gt;</span></code></pre></figure>

<h3 id="displaying-a-large-jpeg-image">2. Displaying a Large JPEG Image</h3>

<p>Let us now add a <code class="highlighter-rouge">SimpleDraweeView</code> widget to our layout. This is the widget inside which we will be displaying the image. It can handle images of several different formats.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;com.facebook.drawee.view.SimpleDraweeView</span>
        <span class="na">android:layout_width=</span><span class="s">"480dp"</span>
        <span class="na">android:layout_height=</span><span class="s">"320dp"</span>
        <span class="na">android:id=</span><span class="s">"@+id/my_drawee_view"</span><span class="nt">/&gt;</span></code></pre></figure>

<p>Note how I have specified actual numbers instead of <code class="highlighter-rouge">wrap_content</code> for the width and height of the widget. This is important for Fresco to work correctly.</p>

<p>Now that we have our widget, let’s write some Java code to display a JPEG image inside it. Well, it takes just two lines of code.</p>

<p>First, initialize the widget using <code class="highlighter-rouge">findViewById()</code>.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">SimpleDraweeView</span> <span class="n">myDraweeView</span>
        <span class="o">=</span> <span class="o">(</span><span class="n">SimpleDraweeView</span><span class="o">)</span><span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">my_drawee_view</span><span class="o">);</span></code></pre></figure>

<p>Next, call its <code class="highlighter-rouge">setImageURI()</code> method and pass a URL to it, which points to your large JPEG file. If you don’t know where to find such images, the <a href="https://reddit.com/r/space" target="_blank" rel="nofollow">space</a> subreddit is a good place to start.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">myDraweeView</span><span class="o">.</span><span class="na">setImageURI</span><span class="o">(</span>
    <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span>
        <span class="s">"http://apod.nasa.gov/apod/image/1610/ivan_iss_3032.jpg"</span>
    <span class="o">)</span>
<span class="o">);</span></code></pre></figure>

<p>And that’s it. If you run the app now, you should be able to see the large image.</p>

<p><img src="/assets/block2/fresco1.png" class="img-responsive center-block img-thumbnail" alt="fresco large JPEG" /></p>

<h3 id="displaying-an-animated-gif">3. Displaying an Animated GIF</h3>

<p>Displaying an animated GIF takes a little more work. If you try using the <code class="highlighter-rouge">setImageURI()</code> method to display an animated GIF, you would end up seeing its first frame only.</p>

<p>To display GIFs, you must create a <code class="highlighter-rouge">DraweeController</code> object first and use it to load the GIF.</p>

<p>First create a builder for the <code class="highlighter-rouge">DraweeController</code> using the <code class="highlighter-rouge">Fresco.newDraweeControllerBuilder()</code> method. Next, call its <code class="highlighter-rouge">setUri()</code> method to specify the URL you want to load. The <a href="https://reddit.com/r/reactiongifs" target="_blank" rel="nofollow">reactiongifs</a> subreddit is a good place to find animated GIFs.</p>

<p>You must also remember to pass <code class="highlighter-rouge">true</code> to its <code class="highlighter-rouge">setAutoPlayAnimations()</code> method, to make sure that the GIF starts playing as soon as it is loaded. Finally, call the <code class="highlighter-rouge">build()</code> method to generate the <code class="highlighter-rouge">DraweeController</code>.</p>

<p>Once generated, you can assign the <code class="highlighter-rouge">DraweeController</code> object to the <code class="highlighter-rouge">SimpleDraweeView</code> widget.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">DraweeController</span> <span class="n">controller</span> <span class="o">=</span>
    <span class="n">Fresco</span><span class="o">.</span><span class="na">newDraweeControllerBuilder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">setUri</span><span class="o">(</span><span class="s">"http://i.imgur.com/jLBIIZg.gif"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">setAutoPlayAnimations</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">();</span>

<span class="n">myDraweeView</span><span class="o">.</span><span class="na">setController</span><span class="o">(</span><span class="n">controller</span><span class="o">);</span></code></pre></figure>

<p>Run the app again to see your animated GIF playing.</p>

<p><img src="/assets/block2/fresco2.png" class="img-responsive center-block img-thumbnail" alt="fresco animated GIF" /></p>

<p>Displaying an animated WebP file is just as easy. All you need to do is point the <code class="highlighter-rouge">DraweeController</code> to its URL.</p>

<h3 id="conclusion">Conclusion</h3>

<p>In this tutorial, you learned how to use Facebook Fresco to manage large image files. I’ll be writing more tutorials about this library because it has a lot more to offer. Stay tuned!</p>

<h4 id="related-reading">Related Reading</h4>

<ul>
  <li><a href="/2016/10/how-to-use-reddit-oauth2-in-android-apps.html">How to Use Reddit OAuth 2.0 In Android Apps</a></li>
  <li><a href="/2016/11/create-imgur-client-android.html">How to Create an Imgur Client for Android</a></li>
</ul>

                    </div>

                    <!-- Affiliate links -->
                    <div class="post-affiliates">
                        <script src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=05bf80c0-f7ed-4826-9e55-1ee911da4f6c"></script>
                    </div>
                    <!-- End of affiliate links -->

                    <!-- Share -->
                    <div class="post-share">
                        <p>If you found this article useful, please share it with your friends and colleagues!</p>
                        <a class="btn btn-primary" style="background:#4099FF" target="_blank" href="https://twitter.com/intent/tweet?text=Displaying GIFs and Large Images in Android Apps Using Facebook Fresco&url=http://progur.com/2016/12/display-gifs-webps-with-facebook-fresco.html&via=hathibel" onclick="javascript:window.open(this.href,
  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=600');return false;"><i class="fa fa-twitter fa-lg"></i></a>

                        <a class="btn btn-primary" style="background:#3b5998" target="_blank" href="https://facebook.com/sharer.php?u=http://progur.com/2016/12/display-gifs-webps-with-facebook-fresco.html" onclick="javascript:window.open(this.href,
  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=600');return false;"><i class="fa fa-facebook fa-lg"></i></a>
                        
                        <a class="btn btn-primary" style="background:#dd4b39" target="_blank" href="https://plus.google.com/share?url=http://progur.com/2016/12/display-gifs-webps-with-facebook-fresco.html" onclick="javascript:window.open(this.href,
  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><i class="fa fa-google-plus fa-lg"></i></a>
                    </div>

                    <!-- End of Share -->

                    <!-- Comments -->
                      <div class="comments">
                          <div id="disqus_thread"></div>
                            <script>                                    
                                var disqus_config = function () {
                                    this.page.url = "http://progur.com/2016/12/display-gifs-webps-with-facebook-fresco.html";
                                    this.page.identifier = "/2016/12/display-gifs-webps-with-facebook-fresco.html";
                                };
                                (function() {
                                    var d = document, s = d.createElement('script');

                                    s.src = '//progur.disqus.com/embed.js';

                                    s.setAttribute('data-timestamp', +new Date());
                                    (d.head || d.body).appendChild(s);
                                })();
                            </script>
                            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
                      </div>
                    <!-- End of comments -->
                </div>
            </div>
        </div>
    </div>
</div>

<footer class="footer">
  <div class="container">
    <p>
        Copyright &copy; 2016-2017 Progur.com | All rights reserved.
        <br/>
        Powered by Jekyll, and several secret sauces.
    </p>
  </div>
</footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shAutoloader.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shCore.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushBash.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushJava.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushPython.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushXml.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushRuby.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushCpp.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushJScript.min.js"></script>

          <script>
              SyntaxHighlighter.defaults.toolbar = false;
              SyntaxHighlighter.all();
          </script>

        <!-- Analytics -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-46644689-5', 'auto');
          ga('send', 'pageview');

        </script>
        <!-- End of Analytics -->

  </body>
</html>

