<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">        

    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" integrity="sha384-awusxf8AUojygHf2+joICySzB780jVvQaVCAt1clU3QsyAitLGul28Qxb2r1e5g+" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">

      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shCore.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shThemeEclipse.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shCoreEclipse.min.css">

    <link href="/css/custom.css" rel="stylesheet">
    <link href="/css/syntax.css" rel="stylesheet">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!-- Begin Jekyll SEO tag v2.0.0 -->
<title>How to Create an Imgur Client for Android - Progur!</title>
<meta property="og:title" content="How to Create an Imgur Client for Android" />
<meta name="description" content="In this article, you’re going to learn how to use the Imgur API and the Android SDK to create a simple Imgur client that can display the latest photos available on Imgur’s gallery page." />
<meta property="og:description" content="In this article, you’re going to learn how to use the Imgur API and the Android SDK to create a simple Imgur client that can display the latest photos available on Imgur’s gallery page." />
<link rel="canonical" href="http://progur.com/2016/11/create-imgur-client-android.html" />
<meta property="og:url" content="http://progur.com/2016/11/create-imgur-client-android.html" />
<meta property="og:site_name" content="Progur!" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-11-12T00:00:00+05:30" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@hathibel" />
<meta name="twitter:creator" content="@hathibel" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "How to Create an Imgur Client for Android",
    "datePublished": "2016-11-12T00:00:00+05:30",
    "description": "In this article, you’re going to learn how to use the Imgur API and the Android SDK to create a simple Imgur client that can display the latest photos available on Imgur’s gallery page.",
    "logo": "http://progur.com/assets/logo.jpg",
    "url": "http://progur.com/2016/11/create-imgur-client-android.html"
  }
</script>
<!-- End Jekyll SEO tag -->
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><i class="fa fa-terminal logo"></i> PROGUR!</a>
        </div>
        <!-- Options -->
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://twitter.com/hathibel" title="Follow me on Twitter"><i class="fa fa-lg fa-twitter" style="color: #4099FF"></i> &nbsp; Twitter</a></li>
            <li><a href="https://github.com/hathibelagal" title="Follow me on GitHub"><i class="fa fa-lg fa-github" style="color: #999999"></i> &nbsp; GitHub</a></li>
            <li><a href="https://medium.com/@hathibel" title="Follow me on Medium"><i class="fa fa-lg fa-medium" style="color: #0be370"></i> &nbsp; Medium</a></li>
            <li><a href="/feed.xml" title="Subscribe to our RSS feed"><i class="fa fa-lg fa-rss" style="color: #FF6600"></i>&nbsp; RSS</a></li>
          </ul>
        </div>
        <!-- End of Options -->
      </div>
    </nav>


<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div>
                <div>
                    <h1 class="post-title">How to Create an Imgur Client for Android</h1>
                    <div class="post-meta">Written by Ashraff Hathibelagal &bull; 12 November 2016</div>
                    <p style="margin-bottom: 20px"><span class="label label-info"><i class="fa fa-tag"> </i> &nbsp; Programming </span></p>
                    <div class="post-actual-content">
                        <h3 id="introduction">Introduction</h3>

<p>Imgur has a very powerful and easy-to-use API that allows you to programmatically access all its photos, albums, and galleries. In this tutorial, I’m going to show you how to use it to create a simple Imgur client for Android. Because it will be a native application, we’ll be working with the Android SDK and a few third-party Android libraries.</p>

<p>To keep this tutorial short, the Imgur client we’ll be creating now will be capable of only fetching and displaying photos from the <a href="http://imgur.com/new" target="_blank" rel="nofollow">usersub</a>. In my opinion, that should give you a good idea of the kind of effort you’ll have to put in.</p>

<p>Here’s what we will be creating:</p>

<p><img src="/assets/block2/pho4.png" class="img-responsive center-block img-thumbnail" alt="imgur app preview" /></p>

<h3 id="prerequisites">Prerequisites</h3>

<p>To be able to follow this tutorial, you’ll need the following:</p>

<ul>
  <li>The latest version of Android Studio</li>
  <li>An Imgur account</li>
  <li>An Android device or emulator running Android 4.4 or higher</li>
</ul>

<h3 id="register-your-app-with-imgur">1. Register Your App With Imgur</h3>

<p>All Imgur clients must be registered. Therefore, before you do anything else, I suggest you log in to your Imgur account and register a new app for yourself. The registration process is quick and easy. For now, just make sure that the <strong>Authorization type</strong> field is set to <em>Anonymous usage</em>.</p>

<p><img src="/assets/block2/pho2.png" class="img-responsive center-block img-thumbnail" alt="app registration" /></p>

<p>Once the registration is successful, you’ll be provided with a Client ID and Client Secret. Make a note of the Client ID, because we’ll be using it soon.</p>

<p><img src="/assets/block2/pho1.png" class="img-responsive center-block img-thumbnail" alt="app registration complete" /></p>

<h3 id="create-an-android-studio-project">2. Create an Android Studio Project</h3>

<p>Launch Android Studio and create a new project that has one <strong>Empty Activity</strong> called <strong>MainActivity</strong>. Once the project has been generated, go to the manifest file and request for the <code class="highlighter-rouge">INTERNET</code> permission.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.INTERNET"</span><span class="nt">/&gt;</span></code></pre></figure>

<p>Next, go to the app module’s <strong>build.gradle</strong> file and add <code class="highlighter-rouge">compile</code> dependencies for Picasso and OkHttp.</p>

<figure class="highlight"><pre><code class="language-groovy" data-lang="groovy"><span class="n">compile</span> <span class="s1">'com.squareup.picasso:picasso:2.5.2'</span>
<span class="n">compile</span> <span class="s1">'com.squareup.okhttp3:okhttp:3.4.1'</span></code></pre></figure>

<p>We’ll, of course, use Picasso to fetch and display the Imgur images. And, we’ll use OkHttp to fetch JSON information from the Imgur API servers.</p>

<p>Also add dependencies for the <code class="highlighter-rouge">RecyclerView</code> and <code class="highlighter-rouge">CardView</code> widgets.</p>

<figure class="highlight"><pre><code class="language-groovy" data-lang="groovy"><span class="n">compile</span> <span class="s1">'com.android.support:recyclerview-v7:23.4.0'</span></code></pre></figure>

<h3 id="create-the-layout">3. Create the Layout</h3>

<p>The layout of our app is going to be very simple. It will have just one <code class="highlighter-rouge">RecyclerView</code> that fills the screen completely. Therefore, add the following to the <strong>activity_main.xml</strong> file:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;android.support.v7.widget.RecyclerView</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
    <span class="na">android:id=</span><span class="s">"@+id/rv_of_photos"</span><span class="nt">&gt;</span>
    
<span class="nt">&lt;/android.support.v7.widget.RecyclerView&gt;</span></code></pre></figure>

<p>Let us now create a new layout XML file for the layout of the individual list items, which are going to be cards. So, create a file called <strong>item.xml</strong>, whose root element is a <code class="highlighter-rouge">CardView</code>. Inside the <code class="highlighter-rouge">CardView</code>, for now, just add an <code class="highlighter-rouge">ImageView</code> for the actual photo, and a <code class="highlighter-rouge">TextView</code> for the title associated with the photo. If you want to, you can always add more <code class="highlighter-rouge">TextView</code> widgets to display more information later.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;android.support.v7.widget.CardView</span>
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
    <span class="na">android:background=</span><span class="s">"@android:color/white"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;LinearLayout</span>
        <span class="na">android:orientation=</span><span class="s">"vertical"</span> <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;ImageView</span>
            <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
            <span class="na">android:layout_height=</span><span class="s">"180dp"</span>
            <span class="na">android:scaleType=</span><span class="s">"centerCrop"</span>
            <span class="na">android:id=</span><span class="s">"@+id/photo"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;TextView</span>
            <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
            <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
            <span class="na">android:id=</span><span class="s">"@+id/title"</span>
            <span class="na">android:textAppearance=</span><span class="s">"@android:style/TextAppearance.Large"</span>
            <span class="na">android:layout_margin=</span><span class="s">"8dp"</span>
            <span class="na">android:textAlignment=</span><span class="s">"center"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/LinearLayout&gt;</span>
<span class="nt">&lt;/android.support.v7.widget.CardView&gt;</span></code></pre></figure>

<p>The layouts are now ready, and we can move on to writing some Java code.</p>

<h3 id="fetch-json-data-from-imgur-servers">4. Fetch JSON Data From Imgur Servers</h3>

<p>We’ll be using the OkHttp library now to fetch JSON data from Imgur’s API servers. So, add a new member variable to <code class="highlighter-rouge">MainActivity</code>, and initialize it inside a new method called <code class="highlighter-rouge">fetchData()</code>. Also, make sure that you add a call to <code class="highlighter-rouge">fetchData()</code> inside the <code class="highlighter-rouge">onCreate()</code> method.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="n">OkHttpClient</span> <span class="n">httpClient</span><span class="o">;</span>

<span class="kd">private</span> <span class="kt">void</span> <span class="nf">fetchData</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">httpClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OkHttpClient</span><span class="o">.</span><span class="na">Builder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<p>We can now build a <code class="highlighter-rouge">Request</code> object to connect to the API servers. This is the URL we’ll be using, which fetches the rising submissions from Imgur’s usersub gallery.:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>https://api.imgur.com/3/gallery/user/rising/0.json
</code></pre>
</div>

<p>We must also remember to include the <strong>Client-ID</strong> as an authorization header. Here’s how you would create the request:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Request</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">url</span><span class="o">(</span><span class="s">"https://api.imgur.com/3/gallery/user/rising/0.json"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span><span class="s">"Client-ID abcdef1234561"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span><span class="s">"My Little App"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span></code></pre></figure>

<p>To actually execute the request, you must use the <code class="highlighter-rouge">enqueue()</code> method and pass a <code class="highlighter-rouge">Callback</code> object to it.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">httpClient</span><span class="o">.</span><span class="na">newCall</span><span class="o">(</span><span class="n">request</span><span class="o">).</span><span class="na">enqueue</span><span class="o">(</span><span class="k">new</span> <span class="n">Callback</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onFailure</span><span class="o">(</span><span class="n">Call</span> <span class="n">call</span><span class="o">,</span> <span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"An error has occurred "</span> <span class="o">+</span> <span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onResponse</span><span class="o">(</span><span class="n">Call</span> <span class="n">call</span><span class="o">,</span> <span class="n">Response</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="c1">// More code goes here</span>
    <span class="o">}</span>
<span class="o">});</span></code></pre></figure>

<p>Inside the <code class="highlighter-rouge">onResponse()</code> method, we must parse the response, which will be a JSON string. Before we do that, however, let us create a new class to represent each photo. So, add the following code to the <code class="highlighter-rouge">MainActivity</code> class:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Photo</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">id</span><span class="o">;</span>
    <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p>The response of the Imgur API looks like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">38891714</span><span class="p">,</span><span class="w"> </span><span class="nt">"account_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Idkwimh4"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"comment_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="nt">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kYoThz7"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"cover_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">360</span><span class="p">,</span><span class="w"> </span><span class="nt">"cover_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">540</span><span class="p">,</span><span class="w">
            </span><span class="nt">"datetime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1478970806</span><span class="p">,</span><span class="w"> </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nt">"downs"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="nt">"favorite"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ahJyF"</span><span class="p">,</span><span class="w"> </span><span class="nt">"images_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w">
            </span><span class="nt">"in_gallery"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nt">"is_ad"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"is_album"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nt">"layout"</span><span class="p">:</span><span class="w"> </span><span class="s2">"blog"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://imgur.com/a/ahJyF"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"nsfw"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">75</span><span class="p">,</span><span class="w"> </span><span class="nt">"privacy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"score"</span><span class="p">:</span><span class="w"> </span><span class="mi">75</span><span class="p">,</span><span class="w"> </span><span class="nt">"section"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fun doodle gif dump to dump to."</span><span class="p">,</span><span class="w">
            </span><span class="nt">"topic"</span><span class="p">:</span><span class="w"> </span><span class="s2">"No Topic"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"topic_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">29</span><span class="p">,</span><span class="w"> </span><span class="nt">"ups"</span><span class="p">:</span><span class="w"> </span><span class="mi">78</span><span class="p">,</span><span class="w"> </span><span class="nt">"views"</span><span class="p">:</span><span class="w"> </span><span class="mi">679</span><span class="p">,</span><span class="w">
            </span><span class="nt">"vote"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">44162823</span><span class="p">,</span><span class="w">
            </span><span class="nt">"account_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qwqq"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"comment_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="nt">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Y6YTQi7"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"cover_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">483</span><span class="p">,</span><span class="w"> </span><span class="nt">"cover_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">484</span><span class="p">,</span><span class="w">
            </span><span class="nt">"datetime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1478970027</span><span class="p">,</span><span class="w"> </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nt">"downs"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
            </span><span class="err">...</span><span class="w">
            </span><span class="err">...</span><span class="w">
</span></code></pre>
</div>

<p>As you can see, it contains a key called <strong>data</strong> whose value is a large array. That’s the array we’re interested in. Now, you must understand that the array contains both albums and photos. In this tutorial, we’ll be displaying only the photos, and the cover photos of the albums.</p>

<p>Add the following JSON parsing code to the <code class="highlighter-rouge">onResponse()</code> method:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">JSONObject</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">body</span><span class="o">().</span><span class="na">string</span><span class="o">());</span>
<span class="n">JSONArray</span> <span class="n">items</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">getJSONArray</span><span class="o">(</span><span class="s">"data"</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Photo</span><span class="o">&gt;</span> <span class="n">photos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Photo</span><span class="o">&gt;();</span>

<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">items</span><span class="o">.</span><span class="na">length</span><span class="o">();</span><span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="n">JSONObject</span> <span class="n">item</span> <span class="o">=</span> <span class="n">items</span><span class="o">.</span><span class="na">getJSONObject</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
    <span class="n">Photo</span> <span class="n">photo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Photo</span><span class="o">();</span>
    <span class="k">if</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getBoolean</span><span class="o">(</span><span class="s">"is_album"</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">photo</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"cover"</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">photo</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"id"</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">photo</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"title"</span><span class="o">);</span>
    
    <span class="n">photos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">photo</span><span class="o">);</span> <span class="c1">// Add photo to list</span>
<span class="o">}</span></code></pre></figure>

<p>The above code must be fairly intuitive. All we are doing is fetching the title and the id/cover id of each photo and adding it to an <code class="highlighter-rouge">ArrayList</code> of <code class="highlighter-rouge">Photo</code> objects.</p>

<p>Now that we have the photos, let us pass the list to a new method called <code class="highlighter-rouge">render()</code>. Make sure that the method is run on the UI thread.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">runOnUiThread</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">render</span><span class="o">(</span><span class="n">photos</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">});</span></code></pre></figure>

<p>Before we create the <code class="highlighter-rouge">render()</code> method, let us now create a <code class="highlighter-rouge">RecyclerView.ViewHolder</code> class for our <code class="highlighter-rouge">RecyclerView</code>. As you might expect, the view holder will have two fields, one for the <code class="highlighter-rouge">ImageView</code> and one for the <code class="highlighter-rouge">TextView</code>.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">PhotoVH</span> <span class="kd">extends</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">ViewHolder</span> <span class="o">{</span>
    <span class="n">ImageView</span> <span class="n">photo</span><span class="o">;</span>
    <span class="n">TextView</span> <span class="n">title</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">PhotoVH</span><span class="o">(</span><span class="n">View</span> <span class="n">itemView</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">itemView</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>And now, inside the <code class="highlighter-rouge">render()</code> method, initialize the <code class="highlighter-rouge">RecyclerView</code> using <code class="highlighter-rouge">findViewById()</code> and assign a layout manager to it.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">render</span><span class="o">(</span><span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Photo</span><span class="o">&gt;</span> <span class="n">photos</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">RecyclerView</span> <span class="n">rv</span> <span class="o">=</span> <span class="o">(</span><span class="n">RecyclerView</span><span class="o">)</span><span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">rv_of_photos</span><span class="o">);</span>
    <span class="n">rv</span><span class="o">.</span><span class="na">setLayoutManager</span><span class="o">(</span><span class="k">new</span> <span class="n">LinearLayoutManager</span><span class="o">(</span><span class="k">this</span><span class="o">));</span>
<span class="o">}</span></code></pre></figure>

<p>It’s time to create a <code class="highlighter-rouge">RecyclerView.Adapter</code>. When you create it, Android Studio should automatically generate stubs for its three methods.</p>

<p>Inside the <code class="highlighter-rouge">onCreateViewHolder()</code> method, you must inflate the <strong>item.xml</strong> layout file and initialize the two views of the <code class="highlighter-rouge">PhotoVH</code> view holder using the <code class="highlighter-rouge">findViewById()</code> method.</p>

<p>Inside the <code class="highlighter-rouge">getItemCount()</code> method, you must simply return the size of the <code class="highlighter-rouge">photos</code> list.</p>

<p>Finally, inside the <code class="highlighter-rouge">onBindViewHolder()</code> method, you must use the <code class="highlighter-rouge">position</code> parameter to set the source of the <code class="highlighter-rouge">ImageView</code>. Similarly, set the text of the <code class="highlighter-rouge">TextView</code>. You must, of course, use the <code class="highlighter-rouge">load()</code> and <code class="highlighter-rouge">into()</code> methods of the <code class="highlighter-rouge">Picasso</code> class to load the photo into the <code class="highlighter-rouge">ImageView</code> asynchronously and on demand.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">RecyclerView</span><span class="o">.</span><span class="na">Adapter</span><span class="o">&lt;</span><span class="n">PhotoVH</span><span class="o">&gt;</span> <span class="n">adapter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">Adapter</span><span class="o">&lt;</span><span class="n">PhotoVH</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">PhotoVH</span> <span class="nf">onCreateViewHolder</span><span class="o">(</span><span class="n">ViewGroup</span> <span class="n">parent</span><span class="o">,</span> <span class="kt">int</span> <span class="n">viewType</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">PhotoVH</span> <span class="n">vh</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PhotoVH</span><span class="o">(</span><span class="n">getLayoutInflater</span><span class="o">().</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">item</span><span class="o">,</span> <span class="kc">null</span><span class="o">));</span>
        <span class="n">vh</span><span class="o">.</span><span class="na">photo</span> <span class="o">=</span> <span class="o">(</span><span class="n">ImageView</span><span class="o">)</span> <span class="n">vh</span><span class="o">.</span><span class="na">itemView</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">photo</span><span class="o">);</span>
        <span class="n">vh</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span> <span class="n">vh</span><span class="o">.</span><span class="na">itemView</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">title</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">vh</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBindViewHolder</span><span class="o">(</span><span class="n">PhotoVH</span> <span class="n">holder</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Picasso</span><span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">).</span><span class="na">load</span><span class="o">(</span><span class="s">"https://i.imgur.com/"</span> <span class="o">+</span>
            <span class="n">photos</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">position</span><span class="o">).</span><span class="na">id</span> <span class="o">+</span> <span class="s">".jpg"</span><span class="o">).</span><span class="na">into</span><span class="o">(</span><span class="n">holder</span><span class="o">.</span><span class="na">photo</span><span class="o">);</span>
        <span class="n">holder</span><span class="o">.</span><span class="na">title</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">photos</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">position</span><span class="o">).</span><span class="na">title</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getItemCount</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">photos</span><span class="o">.</span><span class="na">size</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">};</span></code></pre></figure>

<p>Finally, call the <code class="highlighter-rouge">setAdapter()</code> method to assign the adapter to the <code class="highlighter-rouge">RecyclerView</code>.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">rv</span><span class="o">.</span><span class="na">setAdapter</span><span class="o">(</span><span class="n">adapter</span><span class="o">);</span></code></pre></figure>

<p>Furthermore, to add a little space between the cards, create and add an <code class="highlighter-rouge">ItemDecoration</code> to the <code class="highlighter-rouge">RecyclerView</code>.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">rv</span><span class="o">.</span><span class="na">addItemDecoration</span><span class="o">(</span><span class="k">new</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">ItemDecoration</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">getItemOffsets</span><span class="o">(</span><span class="n">Rect</span> <span class="n">outRect</span><span class="o">,</span> <span class="n">View</span> <span class="n">view</span><span class="o">,</span> <span class="n">RecyclerView</span> <span class="n">parent</span><span class="o">,</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">State</span> <span class="n">state</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">outRect</span><span class="o">.</span><span class="na">bottom</span> <span class="o">=</span> <span class="mi">16</span><span class="o">;</span> <span class="c1">// Gap of 16px</span>
    <span class="o">}</span>
<span class="o">});</span></code></pre></figure>

<p>You can now run the app to see your Imgur client in action.</p>

<p><img src="/assets/block2/pho3.png" class="img-responsive center-block img-thumbnail" alt="imgur app running" /></p>

<h3 id="conclusion">Conclusion</h3>

<p>You now know how to use the Imgur API to create an Android app for Imgur. There is, of course, more to the API than just fetching photos. You can read more about it <a href="https://api.imgur.com/endpoints" target="_blank" rel="nofollow">here</a>.</p>

<h4 id="related-reading">Related Reading</h4>

<ul>
  <li><a href="/2016/10/how-to-use-reddit-oauth2-in-android-apps.html">How to Use Reddit OAuth 2.0 In Android Apps</a></li>
  <li><a href="/2016/09/how-to-create-reddit-bot-using-praw4.html">How to Create a Reddit Bot Using PRAW4 In 5 Minutes</a></li>
</ul>

                    </div>

                    <!-- Share -->
                    <div class="post-share">
                        <p>If you found this article useful, please share it with your friends and colleagues!</p>
                        <a class="btn btn-primary" style="background:#4099FF" target="_blank" href="https://twitter.com/intent/tweet?text=How to Create an Imgur Client for Android&url=http://progur.com/2016/11/create-imgur-client-android.html&via=hathibel" onclick="javascript:window.open(this.href,
  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=600');return false;"><i class="fa fa-twitter fa-lg"></i></a>

                        <a class="btn btn-primary" style="background:#3b5998" target="_blank" href="https://facebook.com/sharer.php?u=http://progur.com/2016/11/create-imgur-client-android.html" onclick="javascript:window.open(this.href,
  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=600');return false;"><i class="fa fa-facebook fa-lg"></i></a>
                        
                        <a class="btn btn-primary" style="background:#dd4b39" target="_blank" href="https://plus.google.com/share?url=http://progur.com/2016/11/create-imgur-client-android.html" onclick="javascript:window.open(this.href,
  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><i class="fa fa-google-plus fa-lg"></i></a>
                    </div>

                    <!-- End of Share -->

                    <!-- Comments -->
                      <div class="comments">
                          <div id="disqus_thread"></div>
                            <script>                                    
                                var disqus_config = function () {
                                    this.page.url = "http://progur.com/2016/11/create-imgur-client-android.html";
                                    this.page.identifier = "/2016/11/create-imgur-client-android.html";
                                };
                                (function() {
                                    var d = document, s = d.createElement('script');

                                    s.src = '//progur.disqus.com/embed.js';

                                    s.setAttribute('data-timestamp', +new Date());
                                    (d.head || d.body).appendChild(s);
                                })();
                            </script>
                            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
                      </div>
                    <!-- End of comments -->
                </div>
            </div>
        </div>
    </div>
</div>

<footer class="footer">
  <div class="container">
    <p>
        Copyright &copy; 2016-2017 Progur.com | All rights reserved.
        <br/>
        Powered by Jekyll, and several secret sauces.
    </p>
  </div>
</footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shAutoloader.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shCore.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushBash.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushJava.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushPython.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushXml.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushRuby.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushCpp.min.js"></script>
          <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushJScript.min.js"></script>

          <script>
              SyntaxHighlighter.defaults.toolbar = false;
              SyntaxHighlighter.all();
          </script>

        <!-- Analytics -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-46644689-5', 'auto');
          ga('send', 'pageview');

        </script>
        <!-- End of Analytics -->

  </body>
</html>

